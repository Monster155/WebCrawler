<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover,maximum-scale=1,user-scalable=0">
  <meta name="referrer" content="unsafe-url">
  <title>Инжиниринг исходящего трафика с Edge Fabric. Часть 1 / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    /* non-breaking hyphen */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/l/font?kit=KFOlCnqEu92Fr1MmEU9vBh0_IsHAlmrO6g&skey=ee881451c540fdec&v=v29) format('woff2');
      unicode-range: U+02011;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.b6238726.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.2287bfbd.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.8d73f026.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.58744b80.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/js/7298.c8f1d73c.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.b6238726.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.8d73f026.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.99fdff73029c662d76a25e7927355795.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/otus\/blog\/714142\/"},"headline":"Инжиниринг исходящего трафика с Edge Fabric. Часть 1","datePublished":"2023-02-01T12:09:01+03:00","dateModified":"2023-02-01T13:47:47+03:00","author":{"@type":"Person","name":"OTUS"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"АннотацияКрупные поставщики контента создают точки присутствия по&nbsp;всему миру, каждая из&nbsp;которых подключена к&nbsp;десяткам или&nbsp;даже сотням сетей. В&nbsp;идеале такая сетев...","url":"https:\/\/habr.com\/ru\/company\/otus\/blog\/714142\/#post-content-body","about":["c_otus","h_network_technologies","f_admin"],"image":["https:\/\/habr.com\/share\/publication\/714142\/6ca577c2c82dfea9d8b6a4972a113cce\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/17c\/0d8\/302\/17c0d8302f2801ac1dea358ac457c8e0.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/b3b\/e05\/454\/b3be05454e2ca797bbb5fb8f848e36e0.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/eda\/810\/76a\/eda81076a1bac5cef6dc41448f84df95.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/a2f\/32d\/919\/a2f32d919ce7b724e04bb17c680a4c6c.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/38f\/98f\/59e\/38f98f59eaf185f041c85a6f8eab681b.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.113.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_com"><meta data-vue-meta="ssr" property="og:site_name" content="Хабр" data-vmid="og:site_name"><meta data-vue-meta="ssr" property="og:title" content="Инжиниринг исходящего трафика с Edge Fabric. Часть 1" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Инжиниринг исходящего трафика с Edge Fabric. Часть 1" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Инжиниринг исходящего трафика с Edge Fabric. Часть 1" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Аннотация Крупные поставщики контента создают точки присутствия по&amp;nbsp;всему миру, каждая из&amp;nbsp;которых подключена к&amp;nbsp;десяткам или&amp;nbsp;даже сотням сетей. В&amp;nbsp;идеале такая сетевая..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Аннотация Крупные поставщики контента создают точки присутствия по&amp;nbsp;всему миру, каждая из&amp;nbsp;которых подключена к&amp;nbsp;десяткам или&amp;nbsp;даже сотням сетей. В&amp;nbsp;идеале такая сетевая..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Аннотация Крупные поставщики контента создают точки присутствия по&amp;nbsp;всему миру, каждая из&amp;nbsp;которых подключена к&amp;nbsp;десяткам или&amp;nbsp;даже сотням сетей. В&amp;nbsp;идеале такая сетевая..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Аннотация Крупные поставщики контента создают точки присутствия по&amp;nbsp;всему миру, каждая из&amp;nbsp;которых подключена к&amp;nbsp;десяткам или&amp;nbsp;даже сотням сетей. В&amp;nbsp;идеале такая сетевая..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Аннотация Крупные поставщики контента создают точки присутствия по&amp;nbsp;всему миру, каждая из&amp;nbsp;которых подключена к&amp;nbsp;десяткам или&amp;nbsp;даже сотням сетей. В&amp;nbsp;идеале такая сетевая..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/371/2a0/dbe/3712a0dbe7c8bbcac3c32d60c5e30184.png" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/371/2a0/dbe/3712a0dbe7c8bbcac3c32d60c5e30184.png" data-vmid="og:image"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/371/2a0/dbe/3712a0dbe7c8bbcac3c32d60c5e30184.png" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/371/2a0/dbe/3712a0dbe7c8bbcac3c32d60c5e30184.png" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/371/2a0/dbe/3712a0dbe7c8bbcac3c32d60c5e30184.png?format=vk" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="714142" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2023-02-01T09:09:01.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" content="https://habr.com/ru/company/otus/blog/714142/" property="og:url" data-vmid="og:url"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" name="keywords" content="network engineering, протокол RIP, протокол динамической маршрутизации, Edge Fabric, bgp, сети, инжиниринг трафика">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/714142/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/company/otus/blog/714142/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" rel="image_src" href="https://habrastorage.org/getpro/habr/upload_files/371/2a0/dbe/3712a0dbe7c8bbcac3c32d60c5e30184.png" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/714142/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
  <script async src="https://unpkg.com/pwacompat" crossorigin="anonymous"></script>
  <script>window.yaContextCb = window.yaContextCb || []</script>
  <script src="https://yandex.ru/ads/system/context.js" async></script>
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_dark"><title>Профиль</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="otus" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><!----></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><!----> <div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-profile-card tm-company-article__profile-card"><div class="tm-company-card tm-company-profile-card__info"><div class="tm-company-card__header"><a href="/ru/company/otus/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="//habrastorage.org/getpro/habr/company/2d5/0ed/b57/2d50edb57cf45fa07cc4f39f53b78395.png" width="48" class="tm-entity-image__pic"></div></a> <!----> <div class="tm-counter-container tm-company-card__rating"><div class="tm-counter-container__header"> <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!----> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-rating"><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_rating">
        901.42
      </span></div> <!----></div></div> <div class="tm-counter-container__footer"><span class="tm-rating__text tm-rating__text">
      Рейтинг
    </span></div></div> <!----></div> <div class="tm-company-card__info"><a href="/ru/company/otus/profile/" class="tm-company-card__name">OTUS</a> <div class="tm-company-card__description">Цифровые навыки от ведущих экспертов</div></div></div> <!----></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet tm-article-snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/MaxRokatansky/" title="MaxRokatansky" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" src="//habrastorage.org/r/w32/getpro/habr/avatars/b9f/baf/5f9/b9fbaf5f96ae52973706a0716bd9216e.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/MaxRokatansky/" class="tm-user-info__username">
      MaxRokatansky
      <!----></a> <span class="tm-article-datetime-published"><time datetime="2023-02-01T09:09:01.000Z" title="2023-02-01, 12:09">1  фев   в 12:09</time></span></span></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Инжиниринг исходящего трафика с Edge Fabric. Часть 1</span></h1> <div class="tm-article-snippet__stats"><!----> <div class="tm-article-reading-time"><span class="tm-svg-icon__wrapper tm-article-reading-time__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Время на прочтение</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#clock"></use></svg></span> <span class="tm-article-reading-time__label">
    13 мин
  </span></div> <span class="tm-icon-counter tm-data-icons__item"><svg height="24" width="24" class="tm-svg-img tm-icon-counter__icon"><title>Количество просмотров</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#counter-views"></use></svg> <span class="tm-icon-counter__value">557</span></span></div> <div class="tm-article-snippet__hubs-container"><div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/company/otus/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании OTUS</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/network_technologies/" class="tm-article-snippet__hubs-item-link"><span>Сетевые технологии</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div></div> <div class="tm-article-snippet__labels-container"><div class="tm-article-snippet__labels"><!----> <div class="tm-article-snippet__label tm-article-snippet__label tm-article-snippet__label_variant-translation"><span>
          Перевод
        </span></div></div></div> <!----> <!----></div></div> <div class="tm-article-presenter__origin"><a href="https://research.facebook.com/publications/engineering-egress-with-edge-fabric/" target="_blank" class="tm-article-presenter__origin-link">
                Автор оригинала:
                <span>
                  ACM SIGCOMM
                </span></a></div> <div data-gallery-root="" lang="ru" class="tm-article-body"><div></div> <div id="post-content-body"><div><div class="article-formatted-body article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><h2>Аннотация</h2><p>Крупные поставщики контента создают точки присутствия по всему миру, каждая из которых подключена к десяткам или даже сотням сетей. В идеале такая сетевая доступность должна позволять провайдерам обслуживать пользователей лучше, но провайдеры не всегда способны обеспечить достаточную пропускную способность на всех предпочтительных пиринговых маршрутах для обработки пикового трафика. Эти ограничения пропускной способности в сочетании с колеблющимися трафиком и производительностью, а также ограничениями протокола BGP, которому уже больше двадцати лет, затрудняют оптимальное использование этих сетевых возможностей.</p><p>Для решения такого рода задач мы в Facebook создали и развернули Edge Fabric — систему на основе SDN (программно‑конфигурируемая сеть), которая обслуживает более двух миллиардов пользователей из десятков точек присутствия на шести континентах. В этой статье мы впервые предоставляем публичную информацию о сетевых возможностях провайдера такого масштаба, а также связанные с этим потенциал и сложности. Мы постарались описать, как Edge Fabric работает в режиме почти‑реального времени, чтобы избежать перегрузки каналов связи в сетевой периферии Facebook. </p><p>Наша оценка производственного трафика по всему миру наглядно демонстрирует, как Edge Fabric эффективно использует межсетевые соединения, не перегружая их и не снижая производительности. Мы также демонстрируем измерение производительности доступных маршрутов в режиме реального времени и изучение возможности их включения в решения по маршрутизации. Мы рассказываем о проблемах, их решениях и уроках, полученных за четыре года эксплуатации и развития Edge Fabric.</p><h2>1. Введение</h2><p>Интернет‑трафик сегодня имеет совершенно другие характеристики, нежели десять лет назад. Трафик все больше исходит от небольшого числа крупных поставщиков контента, облачных провайдеров и сетей доставки контента. Сегодня только десять автономных систем генерируют 70% трафика [20], тогда как в 2007 году, чтобы сгенерировать такую долю, требовались тысячи автономных систем [15]. Эта консолидация контента во многом связана с ростом потокового видео, которое в настоящее время составляет большую часть трафика в Северной Америке [23]. Этот видеотрафик требует высокой пропускной способности и накладывает на задержку ограничения мягкого реального времени (soft real‑time), ведь качество доставки может повлиять на пользовательский опыт [6].</p><p>Чтобы доставлять этот колоссальный объем притязательного трафика и повысить доступность и воспринимаемую пользователями производительность, этим провайдерам пришлось изменить топологию интернета. Они обслуживают своих пользователей из многочисленных точек присутствия (PoP), разбросанных по всему миру [3], через которые они соединяются с множеством других автономных систем [15]. Точка присутствия обычно имеет несколько доступных маршрутов для доступа к пользовательской сети, что увеличивает вероятность того, что найдется «короткий» путь [5]. Это богатое межсетевое взаимодействие дает провайдерам контроль над большими фракциями маршрутов [15] и в совокупности обеспечивает необходимую пропускную способность. Напротив, традиционная иерархия интернет‑провайдеров [15] может испытывать трудности с обеспечением пропускной способности, необходимой для удовлетворения быстро растущего спроса на контент.</p><p>Хотя такие широкие сетевые возможности потенциально обеспечивают повышение производительности, поставщики приложений сталкиваются с трудностями при реализации этих преимуществ. Поразительно то, что, несмотря на эти огромные изменения в доставке трафика и топологии, по которой он доставляется, протокол, используемый для маршрутизации трафика по этой топологии, а именно BGP (протокол пограничного шлюза), практически не изменился, и даже существуют значительные препятствия для его замены [5, 22]. Хотя впечатляет и то, что BGP кое‑как приспособился к этим изменениям. Но все‑таки он плохо подходит для задачи доставки больших объемов консолидированного трафика по плоской топологии:</p><ul><li><p><strong>BGP не учитывает пропускную способность. </strong>Соединения и маршруты имеют ограниченную пропускную способность. Наши замеры для сети крупного поставщика контента показывают, что он не может получить достаточную пропускную способность во многих соединениях для маршрутизации всего трафика по путям, предпочитаемым его политикой BGP. Решения провайдера по маршрутизации должны учитывать эти ограничения, особенно потому, что провайдер может вызвать перегрузку огромными объемами видеотрафика с адаптивным битрейтом, который расширяется, чтобы увеличить битрейт, когда пропускная способность это позволяет.</p></li><li><p><strong>BGP не учитывает производительность. </strong>Перенаправление трафика из любой точки присутствия на IP‑префикс по лучшему маршруту, выбранному BGP, не гарантирует оптимальную производительность. Атрибуты, на которые BGP опирается при выборе маршрута, такие как длина маршрута в автономной системе и дискриминаторы с несколькими выходами (MED), не всегда коррелируют с производительностью. Переопределить выбор BGP маршрута на выбор маршрута с учетом производительности сложно по нескольким причинам. Во‑первых, BGP не включает информацию о производительности, а решения, учитывающие производительность, требуют внешнего механизма для сбора данных о производительности. Во‑вторых, относительная производительность маршрутов к месту назначения может меняться со временем (например, в ответ на нагрузку), но BGP изменяет маршруты только в ответ на изменения в политике или наборе доступных маршрутов. В‑третьих, провайдеру может потребоваться измерять несколько неэквивалентных маршрутов в режиме почти‑реального времени, чтобы отслеживать относительную производительность, однако BGP по традиции позволяет использовать только один маршрут для достижения пункта назначения в любой момент времени. В‑четвертых, поскольку BGP позволяет только один маршрут для каждого пункта назначения, он в корне не поддерживает назначение чувствительного к производительности трафика и эластичного трафика по разным маршрутам, чтобы наилучшим образом обходить ограничения пропускной способности на лучших маршрутах.</p></li></ul><p>Хотя эти ограничения уже давно известны, в нашей статье обсуждается, как они проявляются в производственной среде. В этой статье представлен наш опыт решения этих проблем в Facebook — компании, которая задействует десятки точек присутствия для обслуживания двух миллиардов пользователей практически во всех странах мира. Мы ведем работу в трех основных направлениях.</p><p>Во‑первых, поскольку влияние упомянутых выше ограничений BGP зависит от структуры сети, мы говорим о такой топологии сети и характеристиках трафика, при которых поставщикам популярных приложений сложно управлять своим исходящим трафиком. В Facebook точки присутствия обычно имеют четыре или более маршрутов ко множеству клиентских сетей. Хотя многие межсетевые соединения в США имеют избыточную пропускную способность [8], по нашим измерениям в 20 точках присутствия, 10% выходных интерфейсов испытывают период, в течение которого политика BGP Facebook приводит к тому, что BGP назначает вдвое больше трафика, чем пропускная способность интерфейса! </p><p>Кроме того, спрос на трафик от точки присутствия к префиксу может быть непредсказуемым, при этом скорость трафика к одному и тому же префиксу в определенный момент времени может различаться в 170 раз на протяжении нескольких недель. Таким образом, в то время как широкие сетевые возможности Facebook обеспечивают более короткие маршруты, больше возможностей для маршрутизации и значительную пропускную способность в совокупности, ограничения пропускной способности отдельных маршрутов и нерегулярный трафик затрудняют использование этих сетевых возможностей. Поэтому, трафик должен динамически маршрутизироваться для оптимизации эффективности и производительности без превышения этих ограничений.</p><p>Во‑вторых, мы представляем архитектуру Edge Fabric — системы для оптимизированной маршрутизации исходящего трафика. Edge Fabric получает маршруты BGP от пиринговых маршрутизаторов, отслеживает пропускную способность и спрос на исходящий трафик и определяет, как распределить трафик по маршрутам. Edge Fabric реализует свой выбор маршрутов, внедряя их (используя BGP) в пиринговые маршрутизаторы, заменяя там то, что выбрал BGP. Edge Fabric работает в продакшене уже более четырех лет. Мы оцениваем, как Edge Fabric работает в производственной среде, и рассказываем, как архитектура Edge Fabric развивалась с течением времени. Кроме того, мы обсуждаем технические проблемы, с которыми сталкивается Facebook, и извлеченные из них уроки. </p><p>В‑третьих, мы используем Edge Fabric для постоянного измерения производительности по альтернативным маршрутам для каждого префикса, а не только для лучшего выбора. Edge Fabric собирает эти метрики, направляя небольшую часть трафика на каждый префикс по альтернативным маршрутам. Наши метрики для 4 точек присутствия показывают, что 5% префиксов могут наблюдать снижение средней задержки на 20 и более мс при выборе альтернативы предпочтительному маршруту, выбранному BGP.</p><h2>2. Сеттинг</h2><h3>2.1. Точки присутствия</h3><p>Чтобы сократить задержку для пользователей, Facebook развернул точки присутствия (Points of Presence — PoP) в десятках мест по всему миру. PoP обслуживает пользователей из серверных стоек, которые подключаются через коммутаторы промежуточной агрегации (Aggregation Switches — ASW) к нескольким пиринговым маршрутизаторам (Peering Routers — PR), как показано на рисунке 1. ASW поддерживают BGP‑сессии с PR и коммутаторами стойки. Каждая точка присутствия включает в себя несколько пиринговых маршрутизаторов (PR), которые обмениваются BGP маршрутами и трафиком с другими автономными системами (AS). Использование нескольких точек присутствия снижает задержки двумя способами: 1) они кэшируют контент для непосредственной отправки пользователям и 2) когда пользователю все‑таки необходимо связаться с дата‑центром, TCP‑соединение пользователя завершается в точке присутствия, которая поддерживает отдельные соединения с дата‑центрами, пользуясь преимуществами разделения терминации TCP [9] и TLS.</p><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/17c/0d8/302/17c0d8302f2801ac1dea358ac457c8e0.png" alt="Рисунок 1: В точке присутствия есть пиринговые маршрутизаторы, коммутаторы агрегации и серверы. Частная глобальная сеть (WAN) подключается к дата-центрам и другим точкам присутствия." title="Рисунок 1: В точке присутствия есть пиринговые маршрутизаторы, коммутаторы агрегации и серверы. Частная глобальная сеть (WAN) подключается к дата-центрам и другим точкам присутствия." width="650" height="459" data-src="https://habrastorage.org/getpro/habr/upload_files/17c/0d8/302/17c0d8302f2801ac1dea358ac457c8e0.png"/><figcaption>Рисунок 1: В точке присутствия есть пиринговые маршрутизаторы, коммутаторы агрегации и серверы. Частная глобальная сеть (WAN) подключается к дата-центрам и другим точкам присутствия.</figcaption></figure><p>Только одна точка присутствия объявляет каждый most(more?)‑specific префикс Facebook, поэтому точка присутствия, через которую трафик поступает в сеть Facebook, зависит только от IP‑адреса назначения (покрывающий префикс, объявляемый в точках присутствия, защищает от черных дыр, если more‑specific маршрут не был передан маршрутизатору). Глобальная система балансировки нагрузки назначает пользователей точкам присутствия через DNS (возвращая IP‑адрес конкретной точки присутствия в ответ на DNS‑запрос текущего имени хоста) и путем внедрения URL‑адресов, специфичных для точки присутствия, в ответы (которые разрешаются только в IP‑адреса в конкретной точке присутствия). Подобно аналогичным системам [4], она вводит измерения, чтобы зафиксировать производительность для пользователей из альтернативных точек присутствия. </p><p>Система балансировки нагрузки использует эти измерения, чтобы направить пользователей к их точкам присутствия с «наилучшей» производительностью (с учетом ограничений, таких как пропускная способность; точки присутствия, которые в настоящее время не обслуживают пользователей по техническим причинам, из‑за устранения неполадок или тестирования; и соглашений с другими сетями). Для 80% пользовательских сетей она направляет все запросы из сети в одну (ближайшую) точку присутствия (в течение дня в январе 2017 г.). Детали балансировки нагрузки выходят за рамки этой статьи, и мы разрабатываем Edge Fabric, предполагая, что он не может контролировать, какая точка присутствия обслуживает данного пользователя.</p><p>На рисунке 2 показан относительный объем трафика, обслуживаемого 20 точками присутствия — подмножеством, выбранным из‑за географического разнообразия и разнообразия подключений, которые в совокупности обслуживают большую часть трафика Facebook. В статье эти точки присутствия последовательно упоминаются по номерам, упорядоченным по объему. На этих точках присутствия 95% трафика приходится на клиентов с ≈ 65 000 префиксов (в течение дня в январе 2017 г.). Беря в расчет только клиентские префиксы, необходимые для учета 95% трафика точки присутствия, на рисунке 3 показано, что каждая точка присутствия обслуживает от ≈ 700 до ≈ 13 000 префиксов, а 16 точек присутствия отправляют 95% своего трафика менее чем 6500 префиксам.</p><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/b3b/e05/454/b3be05454e2ca797bbb5fb8f848e36e0.png" alt="Рисунок 2: Относительный объем исходящего трафика (округленный) для 20 точек присутствия." title="Рисунок 2: Относительный объем исходящего трафика (округленный) для 20 точек присутствия." width="715" height="400" data-src="https://habrastorage.org/getpro/habr/upload_files/b3b/e05/454/b3be05454e2ca797bbb5fb8f848e36e0.png"/><figcaption>Рисунок 2: Относительный объем исходящего трафика (округленный) для 20 точек присутствия.</figcaption></figure><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/eda/810/76a/eda81076a1bac5cef6dc41448f84df95.png" alt="Рисунок 3: Количество префиксов BGP, составляющих 95% трафика точек присутствия." title="Рисунок 3: Количество префиксов BGP, составляющих 95% трафика точек присутствия." width="811" height="395" data-src="https://habrastorage.org/getpro/habr/upload_files/eda/810/76a/eda81076a1bac5cef6dc41448f84df95.png"/><figcaption>Рисунок 3: Количество префиксов BGP, составляющих 95% трафика точек присутствия.</figcaption></figure><h3>2.2. Междоменное сетевое взаимодействие</h3><p>BGP‑подключения PR к другим AS бывают разных типов:</p><ul><li><p>Транзитные провайдеры предоставляют маршруты ко всем префиксам через частный сетевой интерконнект (PNI) с выделенной пропускной способностью исключительно для трафика между Facebook и провайдером.</p></li><li><p>Пиры (одноранговые узлы) предоставляют маршруты к префиксам пира и к префиксам в его клиентском конусе [18]. Пиры различаются по типу подключения:</p></li><li><p>Приватные пиры: PR подключается к пиру через выделенный PNI.</p></li><li><p>Публичные пиры: BGP‑сессия PR к пиру и трафик к пиру проходят через общую структуру точки обмена интернет‑трафиком (IXP). </p></li><li><p>Пиры сервера маршрутизации: PR получает маршруты пиров косвенно через сервер маршрутизации [2] и обменивается трафиком через IXP‑фабрику. </p></li></ul><p>Точка присутствия может поддерживать несколько пиринговых BGP‑сессий с одной и той же AS (например, приватный пиринг и публичный пиринг, или на нескольких PR). Большинство точек присутствия подключаются к двум и более транзитным провайдерам, при этом каждый транзитный провайдер поддерживает BGP‑сессию с двумя и более PR точек присутствия для поддержания пропускной способности и обеспечения отказоустойчивости. Когда это возможно, все PR поддерживают равную пропускную способность PNI для данного пира, хотя иногда некоторые PR имеют разную пропускную способность или вообще не подключаются к пиру.</p><p>В общем, мы настроили сеть Facebook таким образом, чтобы поток исходил только в той точке присутствия, в которую поток входит, а не маршрутизировался через глобальную сеть с серверов в одной точке присутствия на исходящие ссылки в другой точке присутствия. Изоляция трафика в точке присутствия снижает нагрузку на магистраль, упрощает решения о маршрутизации и повышает стабильность системы (§ 8,1.3). Даже с учетом этого упрощения у Facebook есть различные варианты маршрутизации. На рисунке 4 показано распределение количества маршрутов, которые каждая точка присутствия может выбрать для доступа к префиксам, составляющим 95% ее трафика. Если пир предоставляет один и тот же путь через публичный пиринг и сервер маршрутизации, или если несколько PR получают один и тот же маршрут от одного и того же пира, мы учитываем его только один раз. Хотя это и не следует из графика (который объединяет пункты назначения с 1–3 маршрутами), все точки присутствия, кроме одной, имеют как минимум два маршрута к каждому пункту назначения, и многие имеют четыре или более маршрутов к большинству префиксов.</p><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/a2f/32d/919/a2f32d919ce7b724e04bb17c680a4c6c.png" alt="Рисунок 4: # маршруты к префиксам, на долю которых приходится 95% трафика точек присутствия." title="Рисунок 4: # маршруты к префиксам, на долю которых приходится 95% трафика точек присутствия." width="757" height="395" data-src="https://habrastorage.org/getpro/habr/upload_files/a2f/32d/919/a2f32d919ce7b724e04bb17c680a4c6c.png"/><figcaption>Рисунок 4: # маршруты к префиксам, на долю которых приходится 95% трафика точек присутствия.</figcaption></figure><p>Мы настраиваем PR так, чтобы они предпочитали одноранговые маршруты транзитным маршрутам (через local_pref), опираясь на длину маршрута в автономной сети в разрешении конфликтов. Когда маршруты остаются привязанными, PR отдают предпочтение маршрутам из следующих источников в следующем порядке: приватные пиры > публичыне пиры > сервера маршрутизации (Мы снижаем приоритетность нескольких приватных пиров по сравнению с публичными из соображений политики, но в контексте данной статьи эффект от этого незначителен). Мы кодируем тип пира в MED (и удаляем MED, установленные пиром, которые обычно выражают предпочтения пира в отношении точек пиринга, но не имеют значения, учитывая, что Facebook выпускает поток трафика в точке присутствия, где он входит). </p><p>Предпочтение пиринговых перед транзитом означает, что AS, взаимодействующая с Facebook, ожидает получать свой трафик по этой ссылке. Кроме того, мы обнаружили, что пиринговые маршруты часто имеют лучшую производительность и меньший риск перегрузки в нисходящем направлении. Короткие пути AS могут быть более прямыми или доставлять трафик к AS назначения раньше [5]. Предпочитая выделенную пропускную способность приватного пиринга соединению через публичную IXP‑фабрику, наша политика позволяет избежать возможности перекрестной перегрузки на выходе и учитывает, что пир выделяет ресурсы для получения трафика Facebook.</p><p>Мы настроили BGP на PR и ASW для использования многопутевого протокола BGP. Когда PR или ASW имеет несколько эквивалентных лучших BGP маршрутов для одного и того же префикса пункта назначения (как определено алгоритмом BGP для выбора лучшего маршрута), он распределяет трафик по эквивалентным маршрутам, используя многопутевую маршрутизацию с равной стоимостью (ECMP).</p><p>В целом, Facebook имеет тысячи одноранговых AS. Таблица 1 показывает, например, долю пиров каждого типа для нескольких точек присутствия. Каждая отраженная точка присутствия имеет в общей сложности сотни пиров, что обеспечивает широкие возможности подключения. В таблице также показана доля трафика, которую каждая точка присутствия может обслуживать по типу пира (при условии, что весь трафик назначается наиболее предпочтительному маршруту без учета пропускной способности). Хотя приватные пиры составляют не более четверти пиров в любой точке присутствия, они в целом получают большую часть трафика, кроме точки присутствия 11. Типично использовать выделенную пропускную способность приватных интерконнектов для пиринговых соединений с большими объемами. Во всех, кроме 11-й точки присутствия, 80+% трафика уходит на приватные и публичные пиры, и пиры серверов маршрутизации, а не на транзит, что есть яркий пример того, как сегодняшние крупные провайдеры «выравнивают» интернет [5, 15]. Однако распределение типов пиров в точках присутствия сильно варьируется по количеству и трафику.</p><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/38f/98f/59e/38f98f59eaf185f041c85a6f8eab681b.png" alt="Таблица 1: Доля пиров и трафика к пирам различных типов на примерах точек присутствия в Европе, Азии и Северной Америке. Пир с приватным и публичным соединением будет учитываться в обоих случаях. Пир с публичным соединением и сервером маршрутизации считается публичным (у них общий порт IXP). Трафик на публичные пиры и серверы маршрутизации объединяется." title="Таблица 1: Доля пиров и трафика к пирам различных типов на примерах точек присутствия в Европе, Азии и Северной Америке. Пир с приватным и публичным соединением будет учитываться в обоих случаях. Пир с публичным соединением и сервером маршрутизации считается публичным (у них общий порт IXP). Трафик на публичные пиры и серверы маршрутизации объединяется." width="773" height="215" data-src="https://habrastorage.org/getpro/habr/upload_files/38f/98f/59e/38f98f59eaf185f041c85a6f8eab681b.png"/><figcaption>Таблица 1: Доля пиров и трафика к пирам различных типов на примерах точек присутствия в Европе, Азии и Северной Америке. Пир с приватным и публичным соединением будет учитываться в обоих случаях. Пир с публичным соединением и сервером маршрутизации считается публичным (у них общий порт IXP). Трафик на публичные пиры и серверы маршрутизации объединяется.</figcaption></figure><hr/><p>Приглашаем всех желающих на открытое занятие, на котором рассмотрим протокол динамической маршрутизации RIP, его плюсы и минусы. Разберем, почему не используется в продакшн, но где еще нужен, а также, какие протоколы пришли ему на замену. Протокол RIP в своей простоте настроек и работы наглядно продемонстрирует логику работы протоколов динамической маршрутизации. Записаться можно <a href="https://otus.pw/fUZi/">на странице специализации Network Engineer.</a></p><p></p></div></div></div> <!----> <!----></div> <!----> <!----></div> <!----> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bnetwork%20engineering%5D" class="tm-tags-list__link">network engineering</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BF%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB%20RIP%5D" class="tm-tags-list__link">протокол RIP</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BF%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB%20%D0%B4%D0%B8%D0%BD%D0%B0%D0%BC%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9%20%D0%BC%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8%5D" class="tm-tags-list__link">протокол динамической маршрутизации</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BEdge%20Fabric%5D" class="tm-tags-list__link">Edge Fabric</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bbgp%5D" class="tm-tags-list__link">bgp</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D0%B5%D1%82%D0%B8%5D" class="tm-tags-list__link">сети</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B8%D0%BD%D0%B6%D0%B8%D0%BD%D0%B8%D1%80%D0%B8%D0%BD%D0%B3%20%D1%82%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0%5D" class="tm-tags-list__link">инжиниринг трафика</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/company/otus/blog/" class="tm-hubs-list__link router-link-active">Блог компании OTUS</a></li><li class="tm-separated-list__item"><a href="/ru/hub/network_technologies/" class="tm-hubs-list__link">Сетевые технологии</a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="24" width="24" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon tm-votes-meter__icon_appearance-article"><title>Всего голосов 7: ↑6 и ↓1</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#counter-rating"></use></svg> <span title="Всего голосов 7: ↑6 и ↓1" class="tm-votes-meter__value tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating">+5</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    3
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/otus/blog/714142/comments/" class="tm-article-comments-counter-link__link"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      0
    </span></a> <!----></div> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="tm-sharing__icon"><path fill="currentColor" d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z"></path></svg></button> <DIV class="v-portal" style="display:none;"></DIV></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <DIV class="v-portal" style="display:none;"></DIV> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <div></div> <section class="tm-block tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/company/otus/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="//habrastorage.org/getpro/habr/company/2d5/0ed/b57/2d50edb57cf45fa07cc4f39f53b78395.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/company/otus/profile/" class="tm-company-snippet__title">OTUS</a> <div class="tm-company-snippet__description">Цифровые навыки от ведущих экспертов</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="https://otus.ru" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a><a href="https://vk.com/club145052891" rel="noopener" target="_blank" class="tm-article-author__contact">
      ВКонтакте
    </a><a href="https://telegram.me/Otusjava" rel="noopener" target="_blank" class="tm-article-author__contact">
      Telegram
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/MaxRokatansky/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/b9f/baf/5f9/b9fbaf5f96ae52973706a0716bd9216e.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 861 голос " class="tm-counter-container tm-karma tm-karma"><div class="tm-counter-container__header"><div class="tm-karma__votes tm-karma__votes_positive">
      51
    </div></div> <div class="tm-counter-container__footer"><div class="tm-karma__text">
      Карма
    </div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <div title="Рейтинг пользователя" class="tm-counter-container"><div class="tm-counter-container__header"> <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!----> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-rating"><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_rating">
        104.4
      </span></div> <!----></div></div> <div class="tm-counter-container__footer"><span class="tm-rating__text tm-rating__text">
      Рейтинг
    </span></div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name tm-user-card__name_variant-article">OTUS</span> <a href="/ru/users/MaxRokatansky/" class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article">
          @MaxRokatansky
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info tm-user-card__short-info_variant-article">Редактор</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <!----> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/company/otus/blog/714142/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментировать 
    </span></a> <!----></div></div></div>  <section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header tm-block__header_variant-borderless"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2> </div> <!----></header> <div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim"><div class="tm-tabs tm-tabs"><div><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim">
        Лучшие за сутки
      </button></span><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_slim">
        Похожие
      </button></span></div> <!----></div> <div class="similar-and-daily__tab-view"><div><!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <div class="tm-placeholder-article-cards"><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div></div> <!----> <!----> <!----> <!----></div> <!----></div></div> <!----></section> <div><!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <div class="tm-placeholder-inset tm-placeholder-vacancies"><div class="tm-placeholder-inset__header"><div class="tm-placeholder__line tm-placeholder__line_inset-header loads"></div></div> <div class="tm-placeholder-inset__body"><ul class="tm-placeholder-list"><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li></ul></div> <div class="tm-placeholder-inset__footer"><div class="tm-placeholder__line tm-placeholder__line_inset-footer loads"></div></div></div> <!----> <!----> <!----> <!----> <!----> <!----></div> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title">Информация</h2> </div> <!----></header> <div class="tm-block__body tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="https://otus.ru" target="_blank" class="tm-company-basic-info__link">
      otus.ru
    </a></dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2017-03-22T08:17:26.000Z" title="2017-03-22, 11:17">22  марта  2017</time></dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2017-03-31T21:00:00.000Z" title="2017-04-01, 00:00">1  апреля  2017</time></dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    51–100 человек
  </dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Россия
  </dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Представитель</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="/ru/users/MaxRokatansky/" class="tm-company-basic-info__link">
      OTUS
    </a></dd></dl></div></div> <!----></section> <div class="tm-company-widgets"></div> <!----> <!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">
          Ваш аккаунт
        </p> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/company/otus/blog/714142/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/company/otus/blog/714142/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">
          Разделы
        </p> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">
          Информация
        </p> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">
          Услуги
        </p> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/corporate-blogs/" target="_blank">
                Корпоративный блог
              </a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/advertising/" target="_blank">
                Медийная реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/native-special/" target="_blank">
                Нативные проекты
              </a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/education-programs/" target="_blank">
                Образовательные программы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/hello-startup/" target="_blank">
                Стартапам
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2023, </span> <span class="tm-copyright__name"><a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a></span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"714142":{"id":"714142","timePublished":"2023-02-01T09:09:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Инжиниринг исходящего трафика с Edge Fabric. Часть 1","leadData":{"textHtml":"\u003Cp\u003EКрупные поставщики контента создают точки присутствия по&nbsp;всему миру, каждая из&nbsp;которых подключена к&nbsp;десяткам или&nbsp;даже сотням сетей. В&nbsp;идеале такая сетевая доступность должна позволять провайдерам обслуживать пользователей лучше, но&nbsp;провайдеры не&nbsp;всегда способны обеспечить достаточную пропускную способность на&nbsp;всех предпочтительных пиринговых маршрутах для&nbsp;обработки пикового трафика. Эти ограничения пропускной способности в&nbsp;сочетании с&nbsp;колеблющимися трафиком и производительностью, а&nbsp;также ограничениями протокола BGP, которому уже больше двадцати лет, затрудняют оптимальное использование этих сетевых возможностей.\u003C\u002Fp\u003E\u003Cp\u003EДля&nbsp;решения такого рода задач мы в&nbsp;Facebook создали и развернули Edge Fabric&nbsp;— систему на&nbsp;основе SDN (программно‑конфигурируемая сеть), которая обслуживает более двух миллиардов пользователей из&nbsp;десятков точек присутствия на&nbsp;шести континентах. В&nbsp;этой статье мы впервые предоставляем публичную информацию о&nbsp;сетевых возможностях провайдера такого масштаба, а&nbsp;также связанные с&nbsp;этим потенциал и сложности. Мы постарались описать, как&nbsp;Edge Fabric работает в&nbsp;режиме почти‑реального времени, чтобы избежать перегрузки каналов связи в&nbsp;сетевой периферии Facebook. \u003C\u002Fp\u003E\u003Cp\u003E\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F371\u002F2a0\u002Fdbe\u002F3712a0dbe7c8bbcac3c32d60c5e30184.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F371\u002F2a0\u002Fdbe\u002F3712a0dbe7c8bbcac3c32d60c5e30184.png","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"ACM SIGCOMM","originalUrl":"https:\u002F\u002Fresearch.facebook.com\u002Fpublications\u002Fengineering-egress-with-edge-fabric\u002F"}}],"author":{"id":"1547287","alias":"MaxRokatansky","fullname":"OTUS","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fb9f\u002Fbaf\u002F5f9\u002Fb9fbaf5f96ae52973706a0716bd9216e.jpg","speciality":"Редактор","scoreStats":{"score":51,"votesCount":861},"rating":104.4,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null}},"statistics":{"commentsCount":0,"favoritesCount":3,"readingCount":557,"score":5,"votesCount":7,"votesCountPlus":6,"votesCountMinus":1},"hubs":[{"id":"21052","alias":"otus","type":"corporative","title":"Блог компании OTUS","titleHtml":"Блог компании OTUS","isProfiled":false,"relatedData":null},{"id":"17123","alias":"network_technologies","type":"collective","title":"Сетевые технологии","titleHtml":"Сетевые технологии","isProfiled":true,"relatedData":null}],"flows":[{"id":"6","alias":"admin","title":"Администрирование","titleHtml":"Администрирование"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Ch2\u003EАннотация\u003C\u002Fh2\u003E\u003Cp\u003EКрупные поставщики контента создают точки присутствия по всему миру, каждая из которых подключена к десяткам или даже сотням сетей. В идеале такая сетевая доступность должна позволять провайдерам обслуживать пользователей лучше, но провайдеры не всегда способны обеспечить достаточную пропускную способность на всех предпочтительных пиринговых маршрутах для обработки пикового трафика. Эти ограничения пропускной способности в сочетании с колеблющимися трафиком и производительностью, а также ограничениями протокола BGP, которому уже больше двадцати лет, затрудняют оптимальное использование этих сетевых возможностей.\u003C\u002Fp\u003E\u003Cp\u003EДля решения такого рода задач мы в Facebook создали и развернули Edge Fabric — систему на основе SDN (программно‑конфигурируемая сеть), которая обслуживает более двух миллиардов пользователей из десятков точек присутствия на шести континентах. В этой статье мы впервые предоставляем публичную информацию о сетевых возможностях провайдера такого масштаба, а также связанные с этим потенциал и сложности. Мы постарались описать, как Edge Fabric работает в режиме почти‑реального времени, чтобы избежать перегрузки каналов связи в сетевой периферии Facebook. \u003C\u002Fp\u003E\u003Cp\u003EНаша оценка производственного трафика по всему миру наглядно демонстрирует, как Edge Fabric эффективно использует межсетевые соединения, не перегружая их и не снижая производительности. Мы также демонстрируем измерение производительности доступных маршрутов в режиме реального времени и изучение возможности их включения в решения по маршрутизации. Мы рассказываем о проблемах, их решениях и уроках, полученных за четыре года эксплуатации и развития Edge Fabric.\u003C\u002Fp\u003E\u003Ch2\u003E1. Введение\u003C\u002Fh2\u003E\u003Cp\u003EИнтернет‑трафик сегодня имеет совершенно другие характеристики, нежели десять лет назад. Трафик все больше исходит от небольшого числа крупных поставщиков контента, облачных провайдеров и сетей доставки контента. Сегодня только десять автономных систем генерируют 70% трафика [20], тогда как в 2007 году, чтобы сгенерировать такую долю, требовались тысячи автономных систем [15]. Эта консолидация контента во многом связана с ростом потокового видео, которое в настоящее время составляет большую часть трафика в Северной Америке [23]. Этот видеотрафик требует высокой пропускной способности и накладывает на задержку ограничения мягкого реального времени (soft real‑time), ведь качество доставки может повлиять на пользовательский опыт [6].\u003C\u002Fp\u003E\u003Cp\u003EЧтобы доставлять этот колоссальный объем притязательного трафика и повысить доступность и воспринимаемую пользователями производительность, этим провайдерам пришлось изменить топологию интернета. Они обслуживают своих пользователей из многочисленных точек присутствия (PoP), разбросанных по всему миру [3], через которые они соединяются с множеством других автономных систем [15]. Точка присутствия обычно имеет несколько доступных маршрутов для доступа к пользовательской сети, что увеличивает вероятность того, что найдется «короткий» путь [5]. Это богатое межсетевое взаимодействие дает провайдерам контроль над большими фракциями маршрутов [15] и в совокупности обеспечивает необходимую пропускную способность. Напротив, традиционная иерархия интернет‑провайдеров [15] может испытывать трудности с обеспечением пропускной способности, необходимой для удовлетворения быстро растущего спроса на контент.\u003C\u002Fp\u003E\u003Cp\u003EХотя такие широкие сетевые возможности потенциально обеспечивают повышение производительности, поставщики приложений сталкиваются с трудностями при реализации этих преимуществ. Поразительно то, что, несмотря на эти огромные изменения в доставке трафика и топологии, по которой он доставляется, протокол, используемый для маршрутизации трафика по этой топологии, а именно BGP (протокол пограничного шлюза), практически не изменился, и даже существуют значительные препятствия для его замены [5, 22]. Хотя впечатляет и то, что BGP кое‑как приспособился к этим изменениям. Но все‑таки он плохо подходит для задачи доставки больших объемов консолидированного трафика по плоской топологии:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EBGP не учитывает пропускную способность. \u003C\u002Fstrong\u003EСоединения и маршруты имеют ограниченную пропускную способность. Наши замеры для сети крупного поставщика контента показывают, что он не может получить достаточную пропускную способность во многих соединениях для маршрутизации всего трафика по путям, предпочитаемым его политикой BGP. Решения провайдера по маршрутизации должны учитывать эти ограничения, особенно потому, что провайдер может вызвать перегрузку огромными объемами видеотрафика с адаптивным битрейтом, который расширяется, чтобы увеличить битрейт, когда пропускная способность это позволяет.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EBGP не учитывает производительность. \u003C\u002Fstrong\u003EПеренаправление трафика из любой точки присутствия на IP‑префикс по лучшему маршруту, выбранному BGP, не гарантирует оптимальную производительность. Атрибуты, на которые BGP опирается при выборе маршрута, такие как длина маршрута в автономной системе и дискриминаторы с несколькими выходами (MED), не всегда коррелируют с производительностью. Переопределить выбор BGP маршрута на выбор маршрута с учетом производительности сложно по нескольким причинам. Во‑первых, BGP не включает информацию о производительности, а решения, учитывающие производительность, требуют внешнего механизма для сбора данных о производительности. Во‑вторых, относительная производительность маршрутов к месту назначения может меняться со временем (например, в ответ на нагрузку), но BGP изменяет маршруты только в ответ на изменения в политике или наборе доступных маршрутов. В‑третьих, провайдеру может потребоваться измерять несколько неэквивалентных маршрутов в режиме почти‑реального времени, чтобы отслеживать относительную производительность, однако BGP по традиции позволяет использовать только один маршрут для достижения пункта назначения в любой момент времени. В‑четвертых, поскольку BGP позволяет только один маршрут для каждого пункта назначения, он в корне не поддерживает назначение чувствительного к производительности трафика и эластичного трафика по разным маршрутам, чтобы наилучшим образом обходить ограничения пропускной способности на лучших маршрутах.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EХотя эти ограничения уже давно известны, в нашей статье обсуждается, как они проявляются в производственной среде. В этой статье представлен наш опыт решения этих проблем в Facebook — компании, которая задействует десятки точек присутствия для обслуживания двух миллиардов пользователей практически во всех странах мира. Мы ведем работу в трех основных направлениях.\u003C\u002Fp\u003E\u003Cp\u003EВо‑первых, поскольку влияние упомянутых выше ограничений BGP зависит от структуры сети, мы говорим о такой топологии сети и характеристиках трафика, при которых поставщикам популярных приложений сложно управлять своим исходящим трафиком. В Facebook точки присутствия обычно имеют четыре или более маршрутов ко множеству клиентских сетей. Хотя многие межсетевые соединения в США имеют избыточную пропускную способность [8], по нашим измерениям в 20 точках присутствия, 10% выходных интерфейсов испытывают период, в течение которого политика BGP Facebook приводит к тому, что BGP назначает вдвое больше трафика, чем пропускная способность интерфейса! \u003C\u002Fp\u003E\u003Cp\u003EКроме того, спрос на трафик от точки присутствия к префиксу может быть непредсказуемым, при этом скорость трафика к одному и тому же префиксу в определенный момент времени может различаться в 170 раз на протяжении нескольких недель. Таким образом, в то время как широкие сетевые возможности Facebook обеспечивают более короткие маршруты, больше возможностей для маршрутизации и значительную пропускную способность в совокупности, ограничения пропускной способности отдельных маршрутов и нерегулярный трафик затрудняют использование этих сетевых возможностей. Поэтому, трафик должен динамически маршрутизироваться для оптимизации эффективности и производительности без превышения этих ограничений.\u003C\u002Fp\u003E\u003Cp\u003EВо‑вторых, мы представляем архитектуру Edge Fabric — системы для оптимизированной маршрутизации исходящего трафика. Edge Fabric получает маршруты BGP от пиринговых маршрутизаторов, отслеживает пропускную способность и спрос на исходящий трафик и определяет, как распределить трафик по маршрутам. Edge Fabric реализует свой выбор маршрутов, внедряя их (используя BGP) в пиринговые маршрутизаторы, заменяя там то, что выбрал BGP. Edge Fabric работает в продакшене уже более четырех лет. Мы оцениваем, как Edge Fabric работает в производственной среде, и рассказываем, как архитектура Edge Fabric развивалась с течением времени. Кроме того, мы обсуждаем технические проблемы, с которыми сталкивается Facebook, и извлеченные из них уроки. \u003C\u002Fp\u003E\u003Cp\u003EВ‑третьих, мы используем Edge Fabric для постоянного измерения производительности по альтернативным маршрутам для каждого префикса, а не только для лучшего выбора. Edge Fabric собирает эти метрики, направляя небольшую часть трафика на каждый префикс по альтернативным маршрутам. Наши метрики для 4 точек присутствия показывают, что 5% префиксов могут наблюдать снижение средней задержки на 20 и более мс при выборе альтернативы предпочтительному маршруту, выбранному BGP.\u003C\u002Fp\u003E\u003Ch2\u003E2. Сеттинг\u003C\u002Fh2\u003E\u003Ch3\u003E2.1. Точки присутствия\u003C\u002Fh3\u003E\u003Cp\u003EЧтобы сократить задержку для пользователей, Facebook развернул точки присутствия (Points of Presence — PoP) в десятках мест по всему миру. PoP обслуживает пользователей из серверных стоек, которые подключаются через коммутаторы промежуточной агрегации (Aggregation Switches — ASW) к нескольким пиринговым маршрутизаторам (Peering Routers — PR), как показано на рисунке 1. ASW поддерживают BGP‑сессии с PR и коммутаторами стойки. Каждая точка присутствия включает в себя несколько пиринговых маршрутизаторов (PR), которые обмениваются BGP маршрутами и трафиком с другими автономными системами (AS). Использование нескольких точек присутствия снижает задержки двумя способами: 1) они кэшируют контент для непосредственной отправки пользователям и 2) когда пользователю все‑таки необходимо связаться с дата‑центром, TCP‑соединение пользователя завершается в точке присутствия, которая поддерживает отдельные соединения с дата‑центрами, пользуясь преимуществами разделения терминации TCP [9] и TLS.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F17c\u002F0d8\u002F302\u002F17c0d8302f2801ac1dea358ac457c8e0.png\" alt=\"Рисунок 1: В точке присутствия есть пиринговые маршрутизаторы, коммутаторы агрегации и серверы. Частная глобальная сеть (WAN) подключается к дата-центрам и другим точкам присутствия.\" title=\"Рисунок 1: В точке присутствия есть пиринговые маршрутизаторы, коммутаторы агрегации и серверы. Частная глобальная сеть (WAN) подключается к дата-центрам и другим точкам присутствия.\" width=\"650\" height=\"459\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F17c\u002F0d8\u002F302\u002F17c0d8302f2801ac1dea358ac457c8e0.png\"\u002F\u003E\u003Cfigcaption\u003EРисунок 1: В точке присутствия есть пиринговые маршрутизаторы, коммутаторы агрегации и серверы. Частная глобальная сеть (WAN) подключается к дата-центрам и другим точкам присутствия.\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EТолько одна точка присутствия объявляет каждый most(more?)‑specific префикс Facebook, поэтому точка присутствия, через которую трафик поступает в сеть Facebook, зависит только от IP‑адреса назначения (покрывающий префикс, объявляемый в точках присутствия, защищает от черных дыр, если more‑specific маршрут не был передан маршрутизатору). Глобальная система балансировки нагрузки назначает пользователей точкам присутствия через DNS (возвращая IP‑адрес конкретной точки присутствия в ответ на DNS‑запрос текущего имени хоста) и путем внедрения URL‑адресов, специфичных для точки присутствия, в ответы (которые разрешаются только в IP‑адреса в конкретной точке присутствия). Подобно аналогичным системам [4], она вводит измерения, чтобы зафиксировать производительность для пользователей из альтернативных точек присутствия. \u003C\u002Fp\u003E\u003Cp\u003EСистема балансировки нагрузки использует эти измерения, чтобы направить пользователей к их точкам присутствия с «наилучшей» производительностью (с учетом ограничений, таких как пропускная способность; точки присутствия, которые в настоящее время не обслуживают пользователей по техническим причинам, из‑за устранения неполадок или тестирования; и соглашений с другими сетями). Для 80% пользовательских сетей она направляет все запросы из сети в одну (ближайшую) точку присутствия (в течение дня в январе 2017 г.). Детали балансировки нагрузки выходят за рамки этой статьи, и мы разрабатываем Edge Fabric, предполагая, что он не может контролировать, какая точка присутствия обслуживает данного пользователя.\u003C\u002Fp\u003E\u003Cp\u003EНа рисунке 2 показан относительный объем трафика, обслуживаемого 20 точками присутствия — подмножеством, выбранным из‑за географического разнообразия и разнообразия подключений, которые в совокупности обслуживают большую часть трафика Facebook. В статье эти точки присутствия последовательно упоминаются по номерам, упорядоченным по объему. На этих точках присутствия 95% трафика приходится на клиентов с ≈ 65 000 префиксов (в течение дня в январе 2017 г.). Беря в расчет только клиентские префиксы, необходимые для учета 95% трафика точки присутствия, на рисунке 3 показано, что каждая точка присутствия обслуживает от ≈ 700 до ≈ 13 000 префиксов, а 16 точек присутствия отправляют 95% своего трафика менее чем 6500 префиксам.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb3b\u002Fe05\u002F454\u002Fb3be05454e2ca797bbb5fb8f848e36e0.png\" alt=\"Рисунок 2: Относительный объем исходящего трафика (округленный) для 20 точек присутствия.\" title=\"Рисунок 2: Относительный объем исходящего трафика (округленный) для 20 точек присутствия.\" width=\"715\" height=\"400\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb3b\u002Fe05\u002F454\u002Fb3be05454e2ca797bbb5fb8f848e36e0.png\"\u002F\u003E\u003Cfigcaption\u003EРисунок 2: Относительный объем исходящего трафика (округленный) для 20 точек присутствия.\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Feda\u002F810\u002F76a\u002Feda81076a1bac5cef6dc41448f84df95.png\" alt=\"Рисунок 3: Количество префиксов BGP, составляющих 95% трафика точек присутствия.\" title=\"Рисунок 3: Количество префиксов BGP, составляющих 95% трафика точек присутствия.\" width=\"811\" height=\"395\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Feda\u002F810\u002F76a\u002Feda81076a1bac5cef6dc41448f84df95.png\"\u002F\u003E\u003Cfigcaption\u003EРисунок 3: Количество префиксов BGP, составляющих 95% трафика точек присутствия.\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ch3\u003E2.2. Междоменное сетевое взаимодействие\u003C\u002Fh3\u003E\u003Cp\u003EBGP‑подключения PR к другим AS бывают разных типов:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EТранзитные провайдеры предоставляют маршруты ко всем префиксам через частный сетевой интерконнект (PNI) с выделенной пропускной способностью исключительно для трафика между Facebook и провайдером.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПиры (одноранговые узлы) предоставляют маршруты к префиксам пира и к префиксам в его клиентском конусе [18]. Пиры различаются по типу подключения:\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПриватные пиры: PR подключается к пиру через выделенный PNI.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПубличные пиры: BGP‑сессия PR к пиру и трафик к пиру проходят через общую структуру точки обмена интернет‑трафиком (IXP). \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПиры сервера маршрутизации: PR получает маршруты пиров косвенно через сервер маршрутизации [2] и обменивается трафиком через IXP‑фабрику. \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EТочка присутствия может поддерживать несколько пиринговых BGP‑сессий с одной и той же AS (например, приватный пиринг и публичный пиринг, или на нескольких PR). Большинство точек присутствия подключаются к двум и более транзитным провайдерам, при этом каждый транзитный провайдер поддерживает BGP‑сессию с двумя и более PR точек присутствия для поддержания пропускной способности и обеспечения отказоустойчивости. Когда это возможно, все PR поддерживают равную пропускную способность PNI для данного пира, хотя иногда некоторые PR имеют разную пропускную способность или вообще не подключаются к пиру.\u003C\u002Fp\u003E\u003Cp\u003EВ общем, мы настроили сеть Facebook таким образом, чтобы поток исходил только в той точке присутствия, в которую поток входит, а не маршрутизировался через глобальную сеть с серверов в одной точке присутствия на исходящие ссылки в другой точке присутствия. Изоляция трафика в точке присутствия снижает нагрузку на магистраль, упрощает решения о маршрутизации и повышает стабильность системы (§ 8,1.3). Даже с учетом этого упрощения у Facebook есть различные варианты маршрутизации. На рисунке 4 показано распределение количества маршрутов, которые каждая точка присутствия может выбрать для доступа к префиксам, составляющим 95% ее трафика. Если пир предоставляет один и тот же путь через публичный пиринг и сервер маршрутизации, или если несколько PR получают один и тот же маршрут от одного и того же пира, мы учитываем его только один раз. Хотя это и не следует из графика (который объединяет пункты назначения с 1–3 маршрутами), все точки присутствия, кроме одной, имеют как минимум два маршрута к каждому пункту назначения, и многие имеют четыре или более маршрутов к большинству префиксов.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa2f\u002F32d\u002F919\u002Fa2f32d919ce7b724e04bb17c680a4c6c.png\" alt=\"Рисунок 4: # маршруты к префиксам, на долю которых приходится 95% трафика точек присутствия.\" title=\"Рисунок 4: # маршруты к префиксам, на долю которых приходится 95% трафика точек присутствия.\" width=\"757\" height=\"395\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa2f\u002F32d\u002F919\u002Fa2f32d919ce7b724e04bb17c680a4c6c.png\"\u002F\u003E\u003Cfigcaption\u003EРисунок 4: # маршруты к префиксам, на долю которых приходится 95% трафика точек присутствия.\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EМы настраиваем PR так, чтобы они предпочитали одноранговые маршруты транзитным маршрутам (через local_pref), опираясь на длину маршрута в автономной сети в разрешении конфликтов. Когда маршруты остаются привязанными, PR отдают предпочтение маршрутам из следующих источников в следующем порядке: приватные пиры \u003E публичыне пиры \u003E сервера маршрутизации (Мы снижаем приоритетность нескольких приватных пиров по сравнению с публичными из соображений политики, но в контексте данной статьи эффект от этого незначителен). Мы кодируем тип пира в MED (и удаляем MED, установленные пиром, которые обычно выражают предпочтения пира в отношении точек пиринга, но не имеют значения, учитывая, что Facebook выпускает поток трафика в точке присутствия, где он входит). \u003C\u002Fp\u003E\u003Cp\u003EПредпочтение пиринговых перед транзитом означает, что AS, взаимодействующая с Facebook, ожидает получать свой трафик по этой ссылке. Кроме того, мы обнаружили, что пиринговые маршруты часто имеют лучшую производительность и меньший риск перегрузки в нисходящем направлении. Короткие пути AS могут быть более прямыми или доставлять трафик к AS назначения раньше [5]. Предпочитая выделенную пропускную способность приватного пиринга соединению через публичную IXP‑фабрику, наша политика позволяет избежать возможности перекрестной перегрузки на выходе и учитывает, что пир выделяет ресурсы для получения трафика Facebook.\u003C\u002Fp\u003E\u003Cp\u003EМы настроили BGP на PR и ASW для использования многопутевого протокола BGP. Когда PR или ASW имеет несколько эквивалентных лучших BGP маршрутов для одного и того же префикса пункта назначения (как определено алгоритмом BGP для выбора лучшего маршрута), он распределяет трафик по эквивалентным маршрутам, используя многопутевую маршрутизацию с равной стоимостью (ECMP).\u003C\u002Fp\u003E\u003Cp\u003EВ целом, Facebook имеет тысячи одноранговых AS. Таблица 1 показывает, например, долю пиров каждого типа для нескольких точек присутствия. Каждая отраженная точка присутствия имеет в общей сложности сотни пиров, что обеспечивает широкие возможности подключения. В таблице также показана доля трафика, которую каждая точка присутствия может обслуживать по типу пира (при условии, что весь трафик назначается наиболее предпочтительному маршруту без учета пропускной способности). Хотя приватные пиры составляют не более четверти пиров в любой точке присутствия, они в целом получают большую часть трафика, кроме точки присутствия 11. Типично использовать выделенную пропускную способность приватных интерконнектов для пиринговых соединений с большими объемами. Во всех, кроме 11-й точки присутствия, 80+% трафика уходит на приватные и публичные пиры, и пиры серверов маршрутизации, а не на транзит, что есть яркий пример того, как сегодняшние крупные провайдеры «выравнивают» интернет [5, 15]. Однако распределение типов пиров в точках присутствия сильно варьируется по количеству и трафику.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F38f\u002F98f\u002F59e\u002F38f98f59eaf185f041c85a6f8eab681b.png\" alt=\"Таблица 1: Доля пиров и трафика к пирам различных типов на примерах точек присутствия в Европе, Азии и Северной Америке. Пир с приватным и публичным соединением будет учитываться в обоих случаях. Пир с публичным соединением и сервером маршрутизации считается публичным (у них общий порт IXP). Трафик на публичные пиры и серверы маршрутизации объединяется.\" title=\"Таблица 1: Доля пиров и трафика к пирам различных типов на примерах точек присутствия в Европе, Азии и Северной Америке. Пир с приватным и публичным соединением будет учитываться в обоих случаях. Пир с публичным соединением и сервером маршрутизации считается публичным (у них общий порт IXP). Трафик на публичные пиры и серверы маршрутизации объединяется.\" width=\"773\" height=\"215\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F38f\u002F98f\u002F59e\u002F38f98f59eaf185f041c85a6f8eab681b.png\"\u002F\u003E\u003Cfigcaption\u003EТаблица 1: Доля пиров и трафика к пирам различных типов на примерах точек присутствия в Европе, Азии и Северной Америке. Пир с приватным и публичным соединением будет учитываться в обоих случаях. Пир с публичным соединением и сервером маршрутизации считается публичным (у них общий порт IXP). Трафик на публичные пиры и серверы маршрутизации объединяется.\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Chr\u002F\u003E\u003Cp\u003EПриглашаем всех желающих на открытое занятие, на котором рассмотрим протокол динамической маршрутизации RIP, его плюсы и минусы. Разберем, почему не используется в продакшн, но где еще нужен, а также, какие протоколы пришли ему на замену. Протокол RIP в своей простоте настроек и работы наглядно продемонстрирует логику работы протоколов динамической маршрутизации. Записаться можно \u003Ca href=\"https:\u002F\u002Fotus.pw\u002FfUZi\u002F\"\u003Eна странице специализации Network Engineer.\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"network engineering"},{"titleHtml":"протокол RIP"},{"titleHtml":"протокол динамической маршрутизации"},{"titleHtml":"Edge Fabric"},{"titleHtml":"bgp"},{"titleHtml":"сети"},{"titleHtml":"инжиниринг трафика"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F371\u002F2a0\u002Fdbe\u002F3712a0dbe7c8bbcac3c32d60c5e30184.png","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F371\u002F2a0\u002Fdbe\u002F3712a0dbe7c8bbcac3c32d60c5e30184.png","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fotus\\\u002Fblog\\\u002F714142\\\u002F\"},\"headline\":\"Инжиниринг исходящего трафика с Edge Fabric. Часть 1\",\"datePublished\":\"2023-02-01T12:09:01+03:00\",\"dateModified\":\"2023-02-01T13:47:47+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"OTUS\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"АннотацияКрупные поставщики контента создают точки присутствия по&nbsp;всему миру, каждая из&nbsp;которых подключена к&nbsp;десяткам или&nbsp;даже сотням сетей. В&nbsp;идеале такая сетев...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fotus\\\u002Fblog\\\u002F714142\\\u002F#post-content-body\",\"about\":[\"c_otus\",\"h_network_technologies\",\"f_admin\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F714142\\\u002F6ca577c2c82dfea9d8b6a4972a113cce\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F17c\\\u002F0d8\\\u002F302\\\u002F17c0d8302f2801ac1dea358ac457c8e0.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fb3b\\\u002Fe05\\\u002F454\\\u002Fb3be05454e2ca797bbb5fb8f848e36e0.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Feda\\\u002F810\\\u002F76a\\\u002Feda81076a1bac5cef6dc41448f84df95.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fa2f\\\u002F32d\\\u002F919\\\u002Fa2f32d919ce7b724e04bb17c680a4c6c.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F38f\\\u002F98f\\\u002F59e\\\u002F38f98f59eaf185f041c85a6f8eab681b.png\"]}","metaDescription":"Аннотация Крупные поставщики контента создают точки присутствия по&nbsp;всему миру, каждая из&nbsp;которых подключена к&nbsp;десяткам или&nbsp;даже сотням сетей. В&nbsp;идеале такая сетевая...","mainImageUrl":null,"amp":true,"customTrackerLinks":[]},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"hasPinnedComments":false,"format":null,"readingTime":13,"complexity":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{"userReasonsList":null}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"articlePinnedComments":{},"searchCommentsResults":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"otus":{"alias":"otus","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F2d5\u002F0ed\u002Fb57\u002F2d50edb57cf45fa07cc4f39f53b78395.png","titleHtml":"OTUS","descriptionHtml":"Цифровые навыки от ведущих экспертов","relatedData":null,"statistics":{"subscribersCount":101365,"rating":901.42,"invest":null,"postsCount":2332,"newsCount":4,"vacanciesCount":0,"employeesCount":56,"careerRating":null},"foundationDate":{"year":"2017","month":"04","day":"01"},"location":{"city":{"id":"447159","title":"Москва"},"region":{"id":"1885","title":"Москва и Московская обл."},"country":{"id":"168","title":"Россия"}},"siteUrl":"https:\u002F\u002Fotus.ru","staffNumber":"51–100 человек","registrationDate":"2017-03-22T08:17:26+00:00","representativeUser":{"alias":"MaxRokatansky","fullname":"OTUS"},"contacts":[{"title":"Сайт","url":"https:\u002F\u002Fotus.ru","siteTitle":"Онлайн‑курсы для профессионалов, дистанционное обучение современным профессиям","favicon":"https:\u002F\u002Fotus.ru\u002Fstatic\u002Fimg\u002Ffavicons\u002Ffavicon-32x32.png"},{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Fclub145052891","siteTitle":"OTUS. Онлайн-образование | VK","favicon":"https:\u002F\u002Fm.vk.com\u002Fimages\u002Ficons\u002Ffavicons\u002Ffav_logo.ico?8"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002FOtusjava","siteTitle":"Telegram: Contact @Otusjava","favicon":"https:\u002F\u002Ftelegram.org\u002Fimg\u002Fwebsite_icon.svg?4"}],"settings":{"analyticsSettings":[],"branding":null,"status":"active","isStartup":false},"metadata":{"titleHtml":"OTUS, Москва - Цифровые навыки от ведущих экспертов с 1 апреля 2017 г.","title":"OTUS, Москва - Цифровые навыки от ведущих экспертов с 1 апреля 2017 г.","keywords":["Программирование","Java","Машинное обучение","Python","Тестирование веб-сервисов","python","java","otus","javascript","программирование","linux","data science","devops","kubernetes","android","machine learning","php","ios","kotlin","c#","машинное обучение","spring","qa","swift","agile"],"descriptionHtml":"2 332 статьи от авторов компании OTUS","description":"2 332 статьи от авторов компании OTUS"},"aDeskSettings":null,"careerAlias":"otus"}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{},"companiesGalleries":{},"companiesBanners":{},"companiesLandingVacancies":{},"companiesTechnologies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null,"jivoStatus":0,"adminNotifications":null},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":true},"flows":{"updates":{"countNewPostsBySubscription":null,"countNewPostsAll":28,"countNewNewsAll":12},"flows":[{"alias":"develop","id":"1","route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":"6","route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":"2","route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":"3","route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":"4","route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":"7","route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""}},"me":{"user":null,"uuid":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"modal":{"modals":[]},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"promoData":{"isLoading":false,"hasLoaded":false,"featurer":null,"megaposts":null,"promoLinks":null,"promoPosts":null},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"stories":{"stories":[]},"technotext":{"years":[],"technotextDocForNominees":null,"technotextDocForWinners":null,"technotextInfo":{},"technotextInfoLoading":false,"technotextWinners":{},"technotextWinnersLoading":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"userVotes":{"karmaVotesList":[],"karmaVotesPagesCount":null,"karmaVotesListLoading":false,"commentsVotesList":[],"commentsVotesPagesCount":null,"commentsVotesListLoading":false,"postsVotesList":[],"postsVotesPagesCount":null,"postsVotesListLoading":false,"userVotesList":[],"userVotesPagesCount":null,"userVotesListLoading":false},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.2287bfbd.js" defer></script><script src="https://assets.habr.com/habr-web/js/7298.c8f1d73c.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.58744b80.js" defer></script>



    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-726094-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
<script src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true"></script>
</body>
</html>
